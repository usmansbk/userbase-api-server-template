type UserAvatar implements Picture {
  id: ID!
  file: File!
  url(edit: ImageEditInput): URL!
  thumbnail(edit: ImageEditInput): URL!
  createdAt: DateTime!
}

type User {
  id: ID!
  firstName: String!
  lastName: String
  surname: String
  email: EmailAddress!
    @auth(
      rules: [
        { allow: owner, ownerField: "id" }
        { allow: roles, roles: "Admin" }
      ]
    )
  language: Locale!
  phoneNumber: PhoneNumber
    @auth(
      rules: [
        { allow: owner, ownerField: "id" }
        { allow: roles, roles: "Admin" }
      ]
    )
  isEmailVerified: Boolean!
  isPhoneNumberVerified: Boolean!
  socialPictureUrl: URL
  picture: UserAvatar
  createdAt: DateTime!
  updatedAt: DateTime
  lastLoggedInAt: DateTime
  passwordLastUpdatedAt: DateTime
  phoneNumberLastUpdatedAt: DateTime
  emailLastUpdatedAt: DateTime
  pictureLastUpdatedAt: DateTime
  roles: [String]!

  rolesCreatedByUser: [Role]!
  permissionsCreatedByUser: [Permission]!
  rolesAssignedToUser: [UserRole]!
  rolesAssignedByUser: [UserRole]!
  permissionsAssignedToUser: [UserPermission]!
  permissionsAssignedByUser: [UserPermission]!
  rolePermissionsAssignedByUser: [RolePermission]!
}

type Role @auth(rules: [{ allow: roles, roles: ["Admin"] }]) {
  id: ID!
  name: String!
  creator: User
  description: String
  createdAt: DateTime!
  updatedAt: DateTime
  userRoles: [UserRole]!
  rolePermissions: [RolePermission]!
}

type Permission @auth(rules: [{ allow: roles, roles: ["Admin"] }]) {
  id: ID!
  name: String!
  creator: User
  description: String
  createdAt: DateTime!
  updatedAt: DateTime
  userPermissions: [UserPermission]!
  rolePermissions: [RolePermission]!
}

type UserRole @auth(rules: [{ allow: roles, roles: ["Admin"] }]) {
  id: ID!
  role: Role!
  assignee: User!
  assignor: User
  createdAt: DateTime!
  updatedAt: DateTime
}

type UserPermission @auth(rules: [{ allow: roles, roles: ["Admin"] }]) {
  id: ID!
  permission: Permission!
  assignee: User!
  assignor: User
  createdAt: DateTime!
  updatedAt: DateTime
}

type RolePermission @auth(rules: [{ allow: roles, roles: ["Admin"] }]) {
  id: ID!
  role: Role!
  permission: Permission!
  assignee: User!
  assignor: User
  createdAt: DateTime!
  updatedAt: DateTime
}

type Query {
  me: User! @auth
}
